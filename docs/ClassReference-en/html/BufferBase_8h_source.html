<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OpenRTM: BufferBase.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>BufferBase.h</h1><a href="BufferBase_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// -*- C++ -*-</span>
<a name="l00020"></a>00020 <span class="comment"></span><span class="preprocessor">#ifndef RTC_BUFFERBASE_H</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define RTC_BUFFERBASE_H</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;stddef.h&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="Properties_8h.html" title="Property list class (derived from Java Properties).">coil/Properties.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;<a class="code" href="BufferStatus_8h.html" title="Buffer status enum definition.">rtm/BufferStatus.h</a>&gt;</span>
<a name="l00026"></a>00026 
<a name="l00041"></a>00041 <span class="keyword">namespace </span>RTC
<a name="l00042"></a>00042 {
<a name="l00103"></a>00103   <span class="keyword">template</span> &lt;<span class="keyword">class</span> DataType&gt;
<a name="l00104"></a><a class="code" href="classRTC_1_1BufferBase.html">00104</a>   <span class="keyword">class </span><a class="code" href="classRTC_1_1BufferBase.html" title="BufferBase abstract class.">BufferBase</a>
<a name="l00105"></a>00105     : <span class="keyword">public</span> <a class="code" href="classRTC_1_1BufferStatus.html" title="BufferStatus mixin class.">BufferStatus</a>
<a name="l00106"></a>00106   {
<a name="l00107"></a>00107   <span class="keyword">public</span>:
<a name="l00108"></a>00108     <a class="code" href="BufferStatus_8h.html#aa5d3227faf3ef033e69533c16bc07561" title="Importing RTC::BufferStatus macro.">BUFFERSTATUS_ENUM</a>
<a name="l00109"></a>00109 
<a name="l00121"></a><a class="code" href="classRTC_1_1BufferBase.html#a9d5cf204b02ee64d7ebf8f3754e2610d">00121</a>     <span class="keyword">virtual</span> <a class="code" href="classRTC_1_1BufferBase.html#a9d5cf204b02ee64d7ebf8f3754e2610d" title="Virtual destructor.">~BufferBase</a>(<span class="keywordtype">void</span>)
<a name="l00122"></a>00122     {
<a name="l00123"></a>00123     };
<a name="l00124"></a>00124     
<a name="l00136"></a>00136     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classRTC_1_1BufferBase.html#a75adf7ba27bb2e795761bce1c7d76413" title="Set the buffer.">init</a>(<span class="keyword">const</span> <a class="code" href="classcoil_1_1Properties.html" title="Class represents a set of properties.">coil::Properties</a>&amp; prop) = 0;
<a name="l00137"></a>00137 
<a name="l00157"></a>00157     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classRTC_1_1BufferBase.html#ad41d5476f9bce0e737115e8ab7cc615f" title="Get the buffer length.">length</a>(<span class="keywordtype">void</span>) <span class="keyword">const</span> = 0;
<a name="l00158"></a>00158 
<a name="l00183"></a>00183     <span class="keyword">virtual</span> ReturnCode <a class="code" href="classRTC_1_1BufferBase.html#ad41d5476f9bce0e737115e8ab7cc615f" title="Get the buffer length.">length</a>(<span class="keywordtype">size_t</span> n) = 0;
<a name="l00184"></a>00184 
<a name="l00208"></a>00208     <span class="keyword">virtual</span> ReturnCode <a class="code" href="classRTC_1_1BufferBase.html#a941b36c7352c76da52725a169e094e16" title="Reset the buffer status.">reset</a>() = 0;
<a name="l00209"></a>00209 
<a name="l00210"></a>00210 
<a name="l00211"></a>00211     <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00233"></a>00233 <span class="comment"></span>    <span class="keyword">virtual</span> DataType* <a class="code" href="classRTC_1_1BufferBase.html#a27d6bb261714e84f16ef17e6920413ce" title="Get the writing pointer.">wptr</a>(<span class="keywordtype">long</span> <span class="keywordtype">int</span> n = 0) = 0;
<a name="l00234"></a>00234 
<a name="l00257"></a>00257     <span class="keyword">virtual</span> ReturnCode <a class="code" href="classRTC_1_1BufferBase.html#a75c0360e0621ebfcbd08e6e937d03ed2" title="Forward n writing pointers.">advanceWptr</a>(<span class="keywordtype">long</span> <span class="keywordtype">int</span> n = 1) = 0;
<a name="l00258"></a>00258 
<a name="l00284"></a>00284     <span class="keyword">virtual</span> ReturnCode <a class="code" href="classRTC_1_1BufferBase.html#af6274c9bc458580643560752f9150235" title="Write data into the buffer.">put</a>(<span class="keyword">const</span> DataType&amp; value) = 0;
<a name="l00285"></a>00285 
<a name="l00311"></a>00311     <span class="keyword">virtual</span> ReturnCode <a class="code" href="classRTC_1_1BufferBase.html#ad9df647826ca2f05664aa0f53e4142f7" title="Write data into the buffer.">write</a>(<span class="keyword">const</span> DataType&amp; value,
<a name="l00312"></a>00312                              <span class="keywordtype">long</span> <span class="keywordtype">int</span> sec = -1, <span class="keywordtype">long</span> <span class="keywordtype">int</span> nsec = -1) = 0;
<a name="l00313"></a>00313 
<a name="l00335"></a>00335     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classRTC_1_1BufferBase.html#a089b1c57c7d8aea9f1bdcc055e20bff0" title="Get a writable number.">writable</a>() <span class="keyword">const</span> = 0;
<a name="l00336"></a>00336 
<a name="l00356"></a>00356     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classRTC_1_1BufferBase.html#a66948bc482a6e127b0ed839a95d692b3" title="Check on whether the buffer is full.">full</a>(<span class="keywordtype">void</span>) <span class="keyword">const</span> = 0;
<a name="l00357"></a>00357 
<a name="l00358"></a>00358     <span class="comment">//----------------------------------------------------------------------</span>
<a name="l00379"></a>00379 <span class="comment"></span>    <span class="keyword">virtual</span> DataType* <a class="code" href="classRTC_1_1BufferBase.html#a854fd94174172b67034cf727e6c0a2d1" title="Get the reading pointer.">rptr</a>(<span class="keywordtype">long</span> <span class="keywordtype">int</span> n = 0) = 0;
<a name="l00380"></a>00380 
<a name="l00403"></a>00403     <span class="keyword">virtual</span> ReturnCode <a class="code" href="classRTC_1_1BufferBase.html#aebc3b8b032109963dfa0e3c48f59a333" title="Forward n reading pointers.">advanceRptr</a>(<span class="keywordtype">long</span> <span class="keywordtype">int</span> n = 1) = 0;
<a name="l00404"></a>00404 
<a name="l00430"></a>00430     <span class="keyword">virtual</span> ReturnCode <span class="keyword">get</span>(DataType&amp; value) = 0;
<a name="l00431"></a>00431 
<a name="l00451"></a>00451     <span class="keyword">virtual</span> DataType&amp;  <span class="keyword">get</span>() = 0;
<a name="l00452"></a>00452 
<a name="l00476"></a>00476     <span class="keyword">virtual</span> ReturnCode <a class="code" href="classRTC_1_1BufferBase.html#a92f188cb4e9a92c9c1079273b1deadc0" title="Read data from the buffer.">read</a>(DataType&amp; value,
<a name="l00477"></a>00477                             <span class="keywordtype">long</span> <span class="keywordtype">int</span> sec = -1, <span class="keywordtype">long</span> <span class="keywordtype">int</span> nsec = -1) = 0;
<a name="l00478"></a>00478     
<a name="l00500"></a>00500     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classRTC_1_1BufferBase.html#a7dd8259e299a273e2fe3744e669b381a" title="Write data into the buffer.">readable</a>() <span class="keyword">const</span> = 0;
<a name="l00501"></a>00501 
<a name="l00521"></a>00521     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classRTC_1_1BufferBase.html#a00e5f836b601681073173740fdaa44d8" title="Check on whether the buffer is empty.">empty</a>(<span class="keywordtype">void</span>) <span class="keyword">const</span> = 0;
<a name="l00522"></a>00522 
<a name="l00523"></a>00523   };
<a name="l00524"></a>00524   
<a name="l00551"></a>00551   <span class="keyword">template</span> &lt;<span class="keyword">class</span> DataType&gt;
<a name="l00552"></a><a class="code" href="classRTC_1_1NullBuffer.html">00552</a>   <span class="keyword">class </span><a class="code" href="classRTC_1_1NullBuffer.html" title="Concrete buffer class for dummy.">NullBuffer</a>
<a name="l00553"></a>00553     : <span class="keyword">public</span> <a class="code" href="classRTC_1_1BufferBase.html" title="BufferBase abstract class.">BufferBase</a>&lt;DataType&gt;
<a name="l00554"></a>00554   {
<a name="l00555"></a>00555   <span class="keyword">public</span>:
<a name="l00577"></a><a class="code" href="classRTC_1_1NullBuffer.html#a77ef32c2911444bcc2cce77c66ae3e00">00577</a>     <a class="code" href="classRTC_1_1NullBuffer.html#a77ef32c2911444bcc2cce77c66ae3e00" title="Constructer.">NullBuffer</a>(<span class="keywordtype">long</span> <span class="keywordtype">int</span> size = 1)
<a name="l00578"></a>00578       : m_length(1)
<a name="l00579"></a>00579     {
<a name="l00580"></a>00580     }
<a name="l00581"></a>00581     
<a name="l00597"></a><a class="code" href="classRTC_1_1NullBuffer.html#a95ff13580dbab77a497c1838a9bf03c1">00597</a>     <span class="keyword">virtual</span> <a class="code" href="classRTC_1_1NullBuffer.html#a95ff13580dbab77a497c1838a9bf03c1" title="Destructor.">~NullBuffer</a>(<span class="keywordtype">void</span>)
<a name="l00598"></a>00598     {
<a name="l00599"></a>00599     }
<a name="l00600"></a>00600     
<a name="l00620"></a><a class="code" href="classRTC_1_1NullBuffer.html#a10b3ecbf48ec0987e321465f21887030">00620</a>     <span class="keyword">virtual</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> <a class="code" href="classRTC_1_1NullBuffer.html#a10b3ecbf48ec0987e321465f21887030" title="Get the buffer length (always 1).">length</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00621"></a>00621 <span class="keyword">    </span>{
<a name="l00622"></a>00622       <span class="keywordflow">return</span> 1;
<a name="l00623"></a>00623     }
<a name="l00624"></a>00624     
<a name="l00648"></a><a class="code" href="classRTC_1_1NullBuffer.html#aa5b727d115e44544be3a7997a5be2e19">00648</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classRTC_1_1NullBuffer.html#aa5b727d115e44544be3a7997a5be2e19" title="Write data into the buffer.">write</a>(<span class="keyword">const</span> DataType&amp; value)
<a name="l00649"></a>00649     {
<a name="l00650"></a>00650       m_data = value;
<a name="l00651"></a>00651       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00652"></a>00652     }
<a name="l00653"></a>00653     
<a name="l00677"></a><a class="code" href="classRTC_1_1NullBuffer.html#a8aca824119c1579a6dceb42a7e5833f7">00677</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classRTC_1_1NullBuffer.html#a8aca824119c1579a6dceb42a7e5833f7" title="Read data from the buffer.">read</a>(DataType&amp; value)
<a name="l00678"></a>00678     {
<a name="l00679"></a>00679       value = m_data;
<a name="l00680"></a>00680       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00681"></a>00681     }
<a name="l00682"></a>00682     
<a name="l00702"></a><a class="code" href="classRTC_1_1NullBuffer.html#a32bf047061497e79daded3ce2f558ccb">00702</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classRTC_1_1NullBuffer.html#a32bf047061497e79daded3ce2f558ccb" title="Check on whether the buffer is full.">isFull</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00703"></a>00703 <span class="keyword">    </span>{
<a name="l00704"></a>00704       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00705"></a>00705     }
<a name="l00706"></a>00706     
<a name="l00726"></a><a class="code" href="classRTC_1_1NullBuffer.html#a29726dbdb85caaf69229105718f15dc1">00726</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classRTC_1_1NullBuffer.html#a29726dbdb85caaf69229105718f15dc1" title="Check on whether the buffer is empty.">isEmpty</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
<a name="l00727"></a>00727 <span class="keyword">    </span>{
<a name="l00728"></a>00728       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00729"></a>00729     }
<a name="l00730"></a>00730     
<a name="l00731"></a>00731   <span class="keyword">protected</span>:
<a name="l00751"></a><a class="code" href="classRTC_1_1NullBuffer.html#a0704a4190bd82c637635528ea4c28416">00751</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classRTC_1_1NullBuffer.html#a0704a4190bd82c637635528ea4c28416" title="Store data into the buffer.">put</a>(<span class="keyword">const</span> DataType&amp; data)
<a name="l00752"></a>00752     {
<a name="l00753"></a>00753       m_data = data;
<a name="l00754"></a>00754     }
<a name="l00755"></a>00755     
<a name="l00775"></a><a class="code" href="classRTC_1_1NullBuffer.html#a5acb245659e61424bda0080b44d7b6d1">00775</a>     <span class="keyword">virtual</span> <span class="keyword">const</span> DataType&amp; <span class="keyword">get</span>(void)
<a name="l00776"></a>00776     {
<a name="l00777"></a>00777       <span class="keywordflow">return</span> m_data;
<a name="l00778"></a>00778     }
<a name="l00779"></a>00779     
<a name="l00802"></a><a class="code" href="classRTC_1_1NullBuffer.html#a5447a6f2d9022baf5394c5afdb4b227e">00802</a>     <span class="keyword">virtual</span> DataType&amp; <a class="code" href="classRTC_1_1NullBuffer.html#a5447a6f2d9022baf5394c5afdb4b227e" title="Get the buffer&amp;#39;s reference to be written the next.">getRef</a>(<span class="keywordtype">void</span>)
<a name="l00803"></a>00803     {
<a name="l00804"></a>00804       <span class="keywordflow">return</span> m_data;
<a name="l00805"></a>00805     }
<a name="l00806"></a>00806     
<a name="l00807"></a>00807   <span class="keyword">private</span>:
<a name="l00808"></a>00808     DataType m_data;
<a name="l00809"></a>00809     <span class="keywordtype">long</span> <span class="keywordtype">int</span> m_length;
<a name="l00810"></a>00810   };
<a name="l00811"></a>00811 }; <span class="comment">// namespace RTC</span>
<a name="l00812"></a>00812 <span class="preprocessor">#endif // BufferBase_h</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu May 24 23:25:21 2012 for OpenRTM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
